<h3>Student Details</h3>
<mat-table [dataSource]="gridData" class="mat-elevation-z8">
  @for (column of gridColumns; track $index) {
    @if ($last) {
      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
        <mat-cell *matCellDef="let student; let i = index">
          <button mat-icon-button (click)="editStudent(i)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button (click)="deleteStudent(i)">
            <mat-icon>delete</mat-icon>
          </button>
        </mat-cell>
      </ng-container>
    } @else {
      <ng-container [matColumnDef]="column">
        <mat-header-cell *matHeaderCellDef>{{column}}</mat-header-cell>
        <mat-cell *matCellDef="let student">{{ student[column] }}</mat-cell>
      </ng-container>
    }
  }
  <mat-header-row *matHeaderRowDef="gridColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: gridColumns"></mat-row>
</mat-table>

<button mat-raised-button color="primary" [disabled]="showForm" (click)="createStudent()">Add +</button>
@if (showForm) {
  <div>studentData: {{studentData|json}}</div>
  <app-sm-form [editingIndex]="editingIndex" [studentData]="studentData" (formUpdated)="formUpdated($event)" />
}
